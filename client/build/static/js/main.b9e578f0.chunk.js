(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,s){e.exports=s(47)},34:function(e,t,s){},43:function(e,t,s){},46:function(e,t,s){},47:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),n=s(15),c=s.n(n),i=s(6),o=s(7),l=s(9),d=s(8),u=s(26),h=s(1),p=(s(33),s(12)),m=(s(34),s(24)),f=s.n(m),v=s(25),g=s.n(v),C=s(16),b=(s(43),function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){return Object(i.a)(this,s),t.call(this,e)}return Object(o.a)(s,[{key:"render",value:function(){var e=null!==this.props.selectedClass,t=e&&this.props.selectedClass.title&&""!==this.props.selectedClass.title,s=e&&this.props.selectedClass.id&&""!==this.props.selectedClass.id,a=e&&this.props.selectedClass.prefixTitle&&""!==this.props.selectedClass.prefixTitle,n=e&&this.props.selectedClass.description&&null!==this.props.selectedClass.description?this.props.selectedClass.description:[];return r.a.createElement("div",{className:"align-items-center h-md-100 p-5 justify-content-center"},r.a.createElement("div",{className:"class_title d-md-flex "},t&&s?this.props.selectedClass.title:""),r.a.createElement("div",{className:"class_code d-md-flex "},s?this.props.selectedClass.id:""),r.a.createElement("div",{className:"class_category d-md-flex "},a?this.props.selectedClass.prefixTitle:""),r.a.createElement("div",{className:"class_description"},n.map((function(e,t){return r.a.createElement("div",{className:"class_description_item d-md-flex",key:t},e)}))),r.a.createElement("a",{className:"class_review d-md-flex",href:s?"https://penncoursereview.com/course/"+this.props.selectedClass.prefix+"-"+this.props.selectedClass.number:"#"},s?"Penn Course Review":""))}}]),s}(r.a.Component)),E=function e(t){Object(i.a)(this,e),this.children={},this.endWord=null,this.value=t,this.courses=[]},y=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(){return Object(i.a)(this,s),t.call(this,null)}return Object(o.a)(s,[{key:"addWord",value:function(e,t){!function e(t,s,a){t.children[s[0]]?t.children[s[0]].courses.length>0&&t.children[s[0]].courses.push(a):(t.children[s[0]]=new E(s[0]),1===s.length&&(t.children[s[0]].endWord=1,t.children[s[0]].courses.push(a))),s.length>1&&e(t.children[s[0]],s.slice(1),a)}(this,e,t)}},{key:"predictWord",value:function(e){var t=[],s={},a=function(e,t){for(var s=t;e&&""!==e&&"undefined"!==typeof s;)s=s.children[e[0]],e=e.substr(1);return s}(e,this);return a&&(!function e(a,r){for(var n in r.children){var c=r.children[n],i=a+c.value;c.endWord&&(t.push(i),c.courses.forEach((function(e,t){s[e.prefix+e.number]=e}))),e(i,c)}}(e,a),a.endWord&&(t.push(e),a.courses.forEach((function(e,t){s[e.prefix+e.number]=e})))),s}}]),s}(E),T=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(i.a)(this,s),(a=t.call(this,e)).state={searchTerm:"",autocompleteData:[],selectedClass:null,courseCodeTrie:null,courseTitleTrie:null,documents:{},idf:{},loadError:!1},a.onChange=a.onChange.bind(Object(p.a)(a)),a.onSelect=a.onSelect.bind(Object(p.a)(a)),a.autocompleteSearch=a.autocompleteSearch.bind(Object(p.a)(a)),a}return Object(o.a)(s,[{key:"loadCoursesByCodeAndTitle",value:function(e){var t=performance.now();if(e){var s=new y,a=new y,r=function(t){var r=e[t];s.addWord(t,r),s.addWord(r.prefix+" "+r.number,r),r.title.toUpperCase().split(" ").forEach((function(e,t){a.addWord(e,r)}))};for(var n in e)r(n);this.setState({courseCodeTrie:s,courseTitleTrie:a})}else console.log("Fail to get courseCodeTrie!");var c=performance.now();console.log("courseCodeTrie took "+(c-t)+" milliseconds.")}},{key:"loadCoursesByIdf",value:function(e){var t=performance.now(),s={},a={},r=function(t){s[t]={},JSON.stringify(e[t].description).split(/\W+/).forEach((function(e,r){var n=e.toUpperCase();n in s[t]?s[t][n]=s[t][n]+1:(s[t][n]=1,a[n]=n in a?a[n]+1:1)}))};for(var n in e)r(n);this.setState({documents:s,idf:a});var c=performance.now();console.log("courseIDF took "+(c-t)+" milliseconds.")}},{key:"loadSheetsApi",value:function(){var e=this,t=performance.now(),s=document.createElement("script");s.src="https://apis.google.com/js/api.js",s.onload=function(){window.gapi.load("client",(function(){window.gapi.client.setApiKey("AIzaSyCh-MGgT12jnVuE6HTPqtJvNbbNu3xfB0U"),window.gapi.client.load("sheets","v4",(function(){var s=window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:"1qGuaKxcUHxWUWs4Hy2RZkfS2_II7DH2EUZhwzYJOHus",range:"A2:E8815"});Object(C.trackPromise)(s.then((function(s){var a={};s.result.values.forEach((function(e){a[e[0]+e[1]]={prefix:e[0],number:e[1],title:e[2],prefixTitle:e[3],description:JSON.parse(e[4])}}));var r=performance.now();console.log("download courses took "+(r-t)+" milliseconds."),e.loadCoursesByCodeAndTitle(a),e.loadCoursesByIdf(a)})).catch((function(t){console.log(t),e.setState({loadError:!0})})))}))}))},document.body.appendChild(s)}},{key:"componentDidMount",value:function(){this.loadSheetsApi()}},{key:"autocompleteSearch",value:function(){var e={};if(null!==this.state.courseCodeTrie){var t=this.state.courseCodeTrie.predictWord(this.state.searchTerm.toUpperCase());for(var s in t){var a=t[s];a.id=s,a.strength=1e6,e[s]=a}}if(null!==this.state.courseTitleTrie){var r=this.state.courseTitleTrie.predictWord(this.state.searchTerm.toUpperCase());for(var n in r){var c=r[n];c.id=n,c.strength=1e6,e[n]=c}}var i={};if(this.state.searchTerm.toUpperCase()in this.state.idf){var o=Object.keys(this.state.documents).length,l=Math.log(o/this.state.idf[this.state.searchTerm.toUpperCase()]);for(var d in this.state.documents)if(!(d in e)){var u=this.state.documents[d][this.state.searchTerm.toUpperCase()]/Object.keys(this.state.documents[d]).length*l;u>.05&&(i[d]=u)}}for(var h in i)if(null!==this.state.courseCodeTrie){var p=this.state.courseCodeTrie.predictWord(h);for(var m in p){var f=p[m];f.id=m,f.strength=i[h],e[m]=f}}if(0===Object.keys(e).length){e[""]={id:"",title:"No Class Found"}}return Object.values(e)}},{key:"onChange",value:function(e){var t=this;this.setState({searchTerm:e.target.value},(function(){if(""!==t.state.searchTerm&&t.state.searchTerm.length>1){var e=performance.now(),s=t.autocompleteSearch();t.setState({autocompleteData:s});var a=performance.now();console.log("Autocomplete took "+(a-e)+" milliseconds.")}}))}},{key:"onSelect",value:function(e){var t=this.state.autocompleteData.find((function(t){return t.id===e}));return this.setState({selectedClass:t,searchTerm:t.id}),e}},{key:"render",value:function(){return r.a.createElement("div",{class:"d-md-flex h-md-100 align-items-center"},r.a.createElement("div",{class:"col-md-6 p-0 bg-indigo h-md-100"},r.a.createElement("div",{class:"text-white align-items-center h-100 p-4 text-center justify-content-center"},r.a.createElement("div",{className:"title"},r.a.createElement("img",{src:"android-chrome-512x512.png",alt:"Penn Course Search",className:"title-logo"}),r.a.createElement("span",{className:"title-text"},"enn Course Search")),r.a.createElement("div",{className:this.state.loadError?"alert alert-danger":"hidden",role:"alert"},"Sorry, there was a problem loading classes, try refreshing the page."),r.a.createElement(g.a,{promiseTracker:C.usePromiseTracker}),r.a.createElement(f.a,{inputProps:{placeholder:"Enter a class, code, or keyword...",className:"search_input",ariaLlabel:"Search"},wrapperStyle:{width:"100%"},wrapperProps:{className:"searchbar"},placeholder:"Enter a class, code, or keyword...",getItemValue:function(e){return e.id},value:this.state.searchTerm,items:this.state.autocompleteData,onChange:this.onChange,onSelect:this.onSelect,sortItems:function(e,t){return t.strength-e.strength},renderMenu:function(e,t,s){return r.a.createElement("div",{className:"searchmenu align-items-center justify-content-center",children:e})},renderItem:function(e,t){return r.a.createElement("div",{className:"searchmenu_item ".concat(t?"item-highlighted":""),key:e.id},r.a.createElement("p",{className:"result_text"},r.a.createElement("span",{className:"result_code"},e.prefix," ",e.number)," ",e.title))}}))),r.a.createElement("div",{class:"col-md-6 p-0 h-md-100 loginarea"},r.a.createElement(b,{selectedClass:this.state.selectedClass})))}}]),s}(r.a.Component),w=function(e){Object(l.a)(s,e);var t=Object(d.a)(s);function s(e){return Object(i.a)(this,s),t.call(this,e)}return Object(o.a)(s,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,null,r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:T}),r.a.createElement(h.a,{exact:!0,path:"*",component:T}))))}}]),s}(r.a.Component);s(46);c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.b9e578f0.chunk.js.map